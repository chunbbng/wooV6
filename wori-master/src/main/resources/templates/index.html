<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Optima</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/header.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.css" rel="stylesheet">
    <script src="/js/header.js" defer></script>
</head>

<body>
<!-- 햄버거 버튼 -->
<div class="hamburger" onclick="toggleMenu()">☰</div>

<!-- 왼쪽 사이드바 헤더 -->
<div class="header">
    <h1>
        <a th:href="@{/}" style="color: white; text-decoration: none;">Plan Optima</a>
    </h1>
    <ul class="menu">
        <li><a th:href="@{/cabinet}">Cabinet</a></li>
        <li><a href="/calendar">Calendar</a></li>
        <li><a href="/check">Check</a></li>
        <li><a href="#">About</a></li>
    </ul>
    <div id="headerLogout" class="logout-button">로그아웃</div>
</div>

<!-- 가운데 텍스트 -->
<div class="centered-text">
    <h2>Plan Optima를 통해 <br> 나만의 효율적인 일정을 <br> 계획해 보세요</h2>
</div>

<!-- 로그인 버튼 및 환영 메시지 -->
<div class="login-container">
    <button id="toggleLogin" class="login-button">로그인</button>
    <div id="welcomeMessage" class="welcome-box" style="display: none;"></div>
</div>

<!-- 로그인 배너 -->
<div id="loginBanner" class="login-banner">
    <form id="authForm" method="post">
        <div id="login-fields">
            <div class="form-group">
                <label for="username">아이디 :</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">비밀번호 :</label>
                <input type="password" id="password" name="password" required>
            </div>
        </div>
        <div id="signup-fields" style="display: none;">
            <div class="form-group">
                <label for="signupName">이름 :</label>
                <input type="text" id="signupName" name="name">
            </div>
        </div>
        <div class="buttons-container">
            <button type="button" id="loginButton">확인</button>
            <button type="button" id="signupButton">회원가입</button>
        </div>
        <div id="message"></div>
    </form>
</div>

<!-- 애니메이션 이미지 -->
<div class="animation-container">
    <img id="myGif" src="image/index.gif" alt="Animation" class="animation">
</div>

<!-- 작업 유형 및 시간 선택 폼 -->
<form th:action="@{/create}" method="post" class="form-container">
    <div class="question-label-group">
        <label class="question-icon question-label">작업 유형을 선택하고, 스케쥴명을 적어주세요.</label>
        <input type="text" id="name" name="name" autocomplete="off" required>
    </div>
    <div class="task-type-selection-group">
        <div class="task-type-preference">
            <div class="task-option option-1" data-task="회의">
                <img src="/image/meeting.png" alt="회의">
            </div>
            <div class="task-option option-2" data-task="학습">
                <img src="/image/study.png" alt="학습">
            </div>
            <div class="task-option option-3" data-task="운동">
                <img src="/image/exercise.png" alt="운동">
            </div>
            <div class="task-option option-4" data-task="보고서 작성">
                <img src="/image/report.png" alt="보고서 작성">
            </div>
            <div class="task-option option-5" data-task="가사일">
                <img src="/image/housework.png" alt="가사일">
            </div>
            <div class="task-option option-6" data-task="창의적인 작업">
                <img src="/image/creative.png" alt="창의적인 작업">
            </div>
            <input type="hidden" id="taskType" name="taskType" required>
        </div>
    </div>

    <!-- 소요 시간 및 평가 슬라이더 -->
    <div class="time-selection-group">
        <label class="question-icon question-label2">예상 소요시간을 선택해주세요.</label>
        <div class="predict-slider-container">
            <div id="predictSlider"></div>
            <p class="time-label">선택된 시간 : <span id="timeValue">0</span></p>
        </div>
        <input type="hidden" id="estimatedTime" name="estimatedTime" required>
        <button id="expandButton" class="expand-button" type="button"></button>
        <div id="secondSliderContainer" style="display: none;">
            <div class="second-slider-container">
                <div id="secondSlider"></div>
            </div>
            <input type="hidden" id="secondEstimatedTime" name="secondEstimatedTime">
        </div>
    </div>

    <!-- 주관적인 평가 입력 슬라이더 -->
    <div class="evaluation-container">
        <label class="question-icon question-label3">이 작업에 대해 주관적인 평가를 입력해주세요.</label>
        <div class="slider-container">
            <div>
                <div id="difficultySlider" class="slider"></div>
                <input type="hidden" id="difficulty" name="difficulty" value="3">
                <div class="slider-label">난이도</div>
            </div>
            <div>
                <div id="stressSlider" class="slider"></div>
                <input type="hidden" id="stress" name="stress" value="3">
                <div class="slider-label">스트레스</div>
            </div>
            <div>
                <div id="urgencySlider" class="slider"></div>
                <input type="hidden" id="urgency" name="urgency" value="3">
                <div class="slider-label">긴급도</div>
            </div>
            <div>
                <div id="importanceSlider" class="slider"></div>
                <input type="hidden" id="importance" name="importance" value="3">
                <div class="slider-label">중요도</div>
            </div>
            <button type="submit" class="center-submit">제 출</button>
        </div>
    </div>
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="/js/index.js"></script>
<script src="/js/timePreference.js"></script>
<script src="/js/auth.js"></script>

<script>
    function hideSignupButton() {
        // 회원가입 버튼 숨기기
        document.getElementById("signupButton").style.display = "none";
        // 필요하다면 추가적인 동작도 여기서 수행 가능
    }
    function toggleMenu() {
        const header = document.querySelector('.header');
        header.classList.toggle('show');
    }
    function createSlider(id, inputId) {
        const slider = document.getElementById(id);
        const input = document.getElementById(inputId);
        noUiSlider.create(slider, {
            start: 3,
            orientation: 'vertical',
            direction: 'rtl',
            connect: [true, false],
            range: { 'min': 1, 'max': 5 },
            step: 1,
            pips: {
                mode: 'steps',
                density: 5,
                format: { to: value => Math.round(value) }
            }
        });
        slider.noUiSlider.on('update', (values, handle) => {
            input.value = Math.round(values[handle]);
        });
    }
    createSlider('difficultySlider', 'difficulty');
    createSlider('stressSlider', 'stress');
    createSlider('urgencySlider', 'urgency');
    createSlider('importanceSlider', 'importance');
</script>
</body>
</html>
